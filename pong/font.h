std::vector<float> letter_01 = {16409.33,400.93,16412.6,126.78,16267.9,223.6,16385.4,308.46};
std::vector<float> letter_02 = {16074.25,398.76,16074.25,135.48,16218.95,222.51,16094.92,298.67};
std::vector<float> letter_03 = {15919.77,123.51,16010.06,220.34,15936.09,325.84,15842.53,220.34,15908.89,138.74};
std::vector<float> letter_04 = {15649.96,325.84,15646.7,99.58,15787.04,187.7,15787.04,325.84};
std::vector<float> letter_05 = {15341,325.84,15341,176.82,15407.35,118.08,15458.48,175.73,15535.73,116.99,15582.51,176.82,15582.51,325.84};
std::vector<float> letter_06 = {15253.95,53.89,15253.95,325.84};
std::vector<float> letter_07 = {15063.57,52.8,15063.57,325.84,15166.92,108.28,15122.31,227.96,15207.17,325.84};
std::vector<float> letter_08 = {14929.76,378.09,14963.48,400.93,14990.68,361.77,14978.71,131.13};
std::vector<float> letter_09 = {14900.38,53.89,14900.38,325.84};
std::vector<float> letter_10 = {14811.16,325.84,14812.26,167.03,14761.12,131.13,14694.76,172.47,14688.24,52.8,14688.24,325.84};
std::vector<float> letter_11 = {14593.59,271.47,14527.22,314.99,14455.42,233.39,14525.05,134.39,14606.64,190.96,14597.93,359.6,14535.92,399.85,14459.77,349.81};
std::vector<float> letter_12 = {14442.36,61.5,14379.26,75.65,14379.26,124.61,14341.18,138.74,14430.4,145.27,14373.82,156.15,14378.17,325.84};
std::vector<float> letter_13 = {14293.32,264.95,14210.63,319.34,14139.92,225.78,14217.16,127.87,14308.55,229.04,14166.03,224.7};
std::vector<float> letter_14 = {14069.2,57.15,14077.91,325.84,13934.3,222.51,14051.8,149.63};
std::vector<float> letter_15 = {13884.26,184.44,13815.72,125.69,13746.09,214.9,13815.72,325.84,13891.87,260.59};
std::vector<float> letter_16 = {13544.82,54.97,13544.82,325.84,13700.4,237.74,13558.97,156.15};
std::vector<float> letter_17 = {13327.24,185.52,13397.95,131.13,13462.14,152.89,13477.38,325.84,13326.15,247.54,13461.05,215.99};
std::vector<float> letter_18 = {13210.83,53.89,13224.3,74.79,13242.38,102.84};
std::vector<float> letter_19 = {12958.43,388.96,13067.46,388.96,13172.75,388.96};
std::vector<float> letter_20 = {12802.86,195.32,12872.48,51.71,12927.97,192.05};
std::vector<float> letter_21 = {12685.36,66.94,12751.73,70.21,12749.55,387.89,12694.06,393.32};
std::vector<float> letter_22 = {12585.27,52.8,12622.46,190.06,12659.25,325.84};
std::vector<float> letter_23 = {12562.42,68.03,12500.41,68.03,12513.47,380.26,12562.42,388.96};
std::vector<float> letter_24 = {12258.89,68.03,12453.63,73.47,12249.1,305.2,12453.63,325.84};
std::vector<float> letter_25 = {12007.58,52.8,12087.54,115.9,12104.4,325.84,12126.71,125.69,12214.29,52.8};
std::vector<float> letter_26 = {11768.24,53.89,11841.84,156.69,11948.61,51.23,11759.53,325.84,11876.79,200.5,11962.97,325.84};
std::vector<float> letter_27 = {11397.26,52.8,11463.62,325.84,11549.56,49.53,11633.34,325.84,11708.4,53.89};
std::vector<float> letter_28 = {11149.21,52.8,11242.77,325.84,11355.91,50.62};
std::vector<float> letter_29 = {10909.86,72.38,10896.44,220.36,11085.02,338.92,11077.4,51.71};
std::vector<float> letter_30 = {10624.83,66.94,10840.23,66.94,10731.44,89.79,10731.44,325.84};
std::vector<float> letter_31 = {10576.95,101.76,10483.39,54.97,10382.22,143.1,10579.14,219.25,10495.36,322.6,10397.45,258.42};
std::vector<float> letter_32 = {10136.35,325.84,10138.52,58.24,10141.79,58.24,10332.17,127.87,10160.28,194.23,10353.93,319.34};
std::vector<float> letter_33 = {9980.67,303.04,9897,314.99,9831.73,223.6,9851.31,99.58,9956.84,60.41,10048.23,139.84,10026.47,285.61,9955.75,259.51,10073.25,342.18};
std::vector<float> letter_34 = {9589.11,325.84,9594.56,61.5,9769.72,132.22,9628.3,199.21};
std::vector<float> letter_35 = {9375.5,70.26,9287.76,174.65,9382.41,325.84,9495.55,273.65,9508.61,150.71,9397.64,61.5};
std::vector<float> letter_36 = {9016.87,318.25,9020.13,48.45,9195.29,325.84,9206.17,50.62};
std::vector<float> letter_37 = {8704.63,319.34,8707.9,54.97,8818.87,325.84,8925.49,50.62,8935.28,325.84};
std::vector<float> letter_38 = {8490.31,54.97,8491.4,313.9,8644.79,325.84};
std::vector<float> letter_39 = {8240.09,56.06,8240.09,325.84,8265.11,217.07,8396.75,62.59,8288.58,220.47,8414.16,325.84};
std::vector<float> letter_40 = {8033.38,247.54,8062.76,318.25,8148.7,294.32,8158.49,54.97};
std::vector<float> letter_41 = {7956.14,51.71,7959.41,325.84};
std::vector<float> letter_42 = {7678.71,56.06,7678.71,325.84,7698.3,194.23,7841.91,181.18,7859.32,62.59,7856.06,313.9};
std::vector<float> letter_43 = {7584.07,127.87,7473.1,50.62,7370.83,186.62,7487.24,340.01,7601.48,205.11,7501.39,209.46};
std::vector<float> letter_44 = {7311,64.77,7148.9,69.12,7152.16,312.82,7169.57,187.7,7288.15,190.96};
std::vector<float> letter_45 = {7073.83,68.03,6892.15,68.03,7009.09,193.14,6896.5,318.25,7071.66,309.56};
std::vector<float> letter_46 = {6620.17,68.03,6820.35,106.1,6622.34,308.46,6628.04,145.36};
std::vector<float> letter_47 = {6535.31,131.13,6421.07,53.89,6337.3,194.22,6435.22,328.04,6536.39,239.92};
std::vector<float> letter_48 = {6092.52,316.08,6095.79,60.41,6260.06,114.81,6128.42,184.44,6276.38,245.36,6107.75,318.25};
std::vector<float> letter_49 = {5818.36,317.16,5924.98,61.5,6034.86,325.84,5879.29,224.7};
std::vector<float> letter_50 = {5595.34,289.96,5517.01,269.29,5551.82,158.33,5616.01,142.01,5644.3,301.93,5689.98,312.82,5769.41,206.2,5606.22,61.5,5465.88,124.61,5451.73,287.8,5650.83,386.79,5772.67,325.84};
std::vector<float> letter_51 = {5270.04,119.16,5324.45,64.77,5395.15,135.48,5315.75,217.07,5308.77,286.96,5327.71,299.76,5311.39,325.84,5291.81,311.73,5304.79,296.31};
std::vector<float> letter_52 = {4736.96,113.72,4569.42,192.05,4723.91,262.77};
std::vector<float> letter_53 = {1904,224.7,1956.59,225.32,2004.09,230.13};
std::vector<float> letter_54 = {1123.96,58.24,1129.12,96.46,1123.96,143.1};
std::vector<float> letter_55 = {27.34,54.99,26.3,247,26.04,269.14,41.89,287.88,6.3,298.14,26.45,321.75,45.83,296.5};
std::vector<float> letter_56 = {169.86,50.63,152.12,122.74,108.64,127.21,235.31,129.94,250.04,54.99,245.13,130.14,275.66,130.8,244.97,134.98,227.13,234.24,232.55,136.68,148.78,137.2,125.68,242.47,72.83,243.21,258.73,249.59,228.75,252.53,216.78,319.91,222.35,248.35,121.48,255.66,108.65,325.34};
std::vector<float> letter_57 = {457.05,111.55,429.86,63.68,391.98,60.92,383.26,29.14,384.12,165.77,372.2,62.59,323.24,107.19,355.88,174.65,442.92,196.41,469.03,268.21,399.4,311.73,389.82,353.07,382.2,193.14,380.03,317.16,353.7,317.16,321.07,256.25};
std::vector<float> letter_58 = {689.91,159.05,744.73,53.98,667.88,179.86,627.86,137.66,627.86,86.53,580,56.06,535.39,85.44,544.09,165.94,601.39,183.51,621.1,155.56,664.67,195.38,598.49,325.84,673.7,199.39,715.35,242.15,715.35,293.28,763.22,323.75,807.83,294.37,799.12,213.87,741.82,196.3,722.12,224.25,675.81,186.06,684.12,170.13};
std::vector<float> letter_59 = {17943.31,137.66,18099.97,133.31,17933.52,307.37,18103.24,314.99};
std::vector<float> letter_60 = {1042.37,211.64,955.34,318.25,874.82,282.35,886.79,196.41,1009.72,130.04,986.89,61.5,907.46,75.65,908.55,142.01,1061.95,317.16};
std::vector<float> letter_61 = {1262.13,50.62,1194.67,205.11,1219.69,325.84,1257.77,397.67};
std::vector<float> letter_62 = {1326.31,46.28,1381.8,167.03,1380.71,307.37,1331.75,404.2};
std::vector<float> letter_63 = {17760.54,386.79,17805.14,399.85,17909.59,128.95,17793.18,294.32,17764.89,127.87};
std::vector<float> letter_64 = {1834.37,317.16,1820.23,292.14,1852.87,294.32,1853.95,345.45,1821.33,371.56};
std::vector<float> letter_65 = {2476.25,135.48,2571.99,65.85,2555.67,325.84};
std::vector<float> letter_66 = {2885.31,114.81,2954.94,53.89,3027.83,147.45,2952.77,184.44,3028.37,204.57,2956.03,321.51,2889.66,254.06};
std::vector<float> letter_67 = {2674.26,128.95,2733,61.5,2820.03,95.23,2795.01,195.32,2682.96,325.84,2826.56,313.9};
std::vector<float> letter_68 = {2408.8,143.64,2318.5,66.94,2249.97,193.68,2320.68,325.84,2394.66,263.85,2406.52,175.81};
std::vector<float> letter_69 = {2127.03,325.84,2167.86,178.14,2210.79,47.36};
std::vector<float> letter_70 = {17578.86,126.78,17625.53,203.33,17567.98,325.84,17707.23,126.78,17654.31,244.94,17717.02,325.84};
std::vector<float> letter_71 = {17299.25,128.95,17353.66,325.84,17412.4,126.78,17470.07,325.84,17529.9,127.87};
std::vector<float> letter_72 = {17105.6,128.95,17179.58,325.84,17253.57,127.87};
std::vector<float> letter_73 = {16909.78,128.95,16917.62,236.65,17045.77,325.84,17044.68,130.04};
std::vector<float> letter_74 = {1460.38,103.46,1432.93,88.7,1480.8,102.84,1486.24,46.28,1498.21,98.49,1539.54,95.23,1492.77,110.46,1517.79,157.24,1486.24,119.16,1461.21,156.15,1475.36,113.72};
std::vector<float> letter_75 = {1674.45,103.93,1673.96,181.98,1592.6,184.15,1753.84,186.33,1673.22,190.42,1673.36,276.91};
std::vector<float> letter_76 = {2051.38,301.05,2045.43,308.46,2067.19,325.84,2082.42,304.11,2057.33,293.63};
std::vector<float> letter_77 = {16816.22,71.3,16821.66,132.22,16818.4,132.22,16781.4,137.66,16863,143.1,16815.13,153.98,16818.4,301.93,16869.53,325.84};
std::vector<float> letter_78 = {16605.16,267.12,16685.67,325.84,16747.68,260.59,16599.72,186.61,16674.78,125.69,16734.62,179};
std::vector<float> letter_79 = {3246.5,197.49,3074.61,243.19,3204.08,64.77,3212.78,325.84};
std::vector<float> letter_80 = {16496.36,325.84,16495.28,176.82,16548.59,125.69,16570.35,161.59};
std::vector<float> letter_81 = {3656.65,116.99,3606.61,63.68,3526.1,110.46,3526.1,285.61,3593.56,325.84,3676.23,254.06,3605.52,158.34,3540.25,190.96};
std::vector<float> letter_82 = {3717.57,72.38,3874.24,71.3,3804.61,190.96,3776.32,316.08};
std::vector<float> letter_83 = {3454.3,70.21,3333.21,81.52,3328.1,182.26,3471.32,162.74,3410.78,314.99,3316.13,250.8};
std::vector<float> letter_84 = {3950.4,125.69,4015.43,67.64,4070.07,135.48,4023.58,178.66,4087.47,237.74,4008.78,328.9,3936.24,229.04,4000.79,177.92};
std::vector<float> letter_85 = {4218.88,320.67,4305.16,200.59,4229.13,60.69,4148.97,162.54,4267.42,216.45};
std::vector<float> letter_86 = {4386.65,283.44,4400.8,308.46,4383.39,325.84,4365.98,300.84,4386.65,193.14,4399.71,149.63,4382.3,132.22,4364.89,157.24,4381.95,166.54};
std::vector<float> letter_87 = {5005.68,112.63,5177.58,193.14,5017.65,264.95};
std::vector<float> letter_88 = {4486.74,164.86,4471.51,140.92,4494.36,131.13,4504.15,146.36,4486.35,293.31,4463.44,296.04,4478.22,321.96,4501.97,293.23,4497.62,345.45,4474.78,369.39};
std::vector<float> letter_89 = {4780.98,213.89,4952.37,215.75,4786.73,159.37,4956.96,158.86};

std::vector<float>* font[] = {
&letter_55,
&letter_56,
&letter_57,
&letter_58,
&letter_60,
&letter_54,
&letter_61,
&letter_62,
&letter_74,
&letter_75,
&letter_64,
&letter_53,
&letter_76,
&letter_69,
&letter_68,
&letter_65,
&letter_67,
&letter_66,
&letter_79,
&letter_83,
&letter_81,
&letter_82,
&letter_84,
&letter_85,
&letter_86,
&letter_88,
&letter_52,
&letter_89,
&letter_87,
&letter_51,
&letter_50,
&letter_49,//A
&letter_48,
&letter_47,
&letter_46,
&letter_45,
&letter_44,
&letter_43,
&letter_42,
&letter_41,
&letter_40,
&letter_39,
&letter_38,
&letter_37,
&letter_36,
&letter_35,
&letter_34,
&letter_33,
&letter_32,
&letter_31,
&letter_30,
&letter_29,
&letter_28,
&letter_27,
&letter_26,
&letter_25,
&letter_24,
&letter_23,
&letter_22,
&letter_21,
&letter_20,
&letter_19,
&letter_18,
&letter_17,
&letter_16,
&letter_15,
&letter_14,
&letter_13,
&letter_12,
&letter_11,
&letter_10,
&letter_09,
&letter_08,
&letter_07,
&letter_06,
&letter_05,
&letter_04,
&letter_03,
&letter_02,
&letter_01,
&letter_80,
&letter_78,
&letter_77,
&letter_73,
&letter_72,
&letter_71,
&letter_70,
&letter_63,
&letter_59 };

int letter_width[89];

bool font_preprocess_flag = false;

void preprocessFont()
{
    if (font_preprocess_flag) return;

    font_preprocess_flag = true;

    int letters_count = sizeof(font) / sizeof(std::vector<float>*);

    for (int letter = 0; letter < letters_count; letter++)
    {
        //min-max
        float min_x = 1000000; float max_x = -100000;
        for (int i = 0; i < font[letter]->size(); i += 2)
        {
            float x = font[letter]->at(i);
            min_x = min(min_x, x);
            max_x = max(max_x, x);
        }

        //offset x
        for (int i = 0; i < font[letter]->size(); i += 2)
        {
            font[letter]->at(i) -= min_x;
        }

        //scale
        float scale = .1;

        for (int i = 0; i < font[letter]->size(); i += 2)
        {
            font[letter]->at(i) *= scale;
            font[letter]->at(i + 1) *= scale;
        }
        float width = max_x - min_x;

        letter_width[letter] = width * scale;

    }

}

float drawLetter(int letter, float x, float y, float scale)
{

    MoveToEx(window.context, x+font[letter]->at(0), y+font[letter]->at(1), NULL);
    
    for (int i = 2; i < font[letter]->size(); i+=2)
    {
        float xx = x + font[letter]->at(i)*scale;
        float yy = y + font[letter]->at(i+1)*scale;
        LineTo(window.context, xx,yy);
    }

    //float width = max_x - min_x;
    return letter_width[letter]*scale;
}





float drawString(const char* str,float x, float y, float scale, bool centered, bool draw = true)
{
    preprocessFont();

    float offset = 0;
    
    if (centered&&draw)
    {
        offset = drawString(str, x, y, scale, false, false)/2.;
    }

    float space = 30;
    float tracking = 10;
    float interline = 40;

    HPEN pen = CreatePen(PS_SOLID, 3, RGB(255, 255, 255));
    SelectObject(window.context, pen);

    int letters_count = strlen(str);
    float base_x = x;
    for (int i = 0; i < letters_count; i++)
    {
        char alpha = str[i];

        switch (alpha)
        {
        case ' ':
            x += space;
            break;
        case '\n':
            x = base_x;
            y += interline;
            break;
        default:
            if (draw)
            {
                x += drawLetter(alpha - 34, x-offset, y, scale) + tracking;
            }
            else
            {
                x += letter_width[alpha-34] * scale + tracking;
            }
            break;
        }
    }

    DeleteObject(pen);

    return x - base_x;

}